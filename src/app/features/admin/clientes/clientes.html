<!-- Componente de notificaciones toast -->
<p-toast></p-toast>

<!-- Encabezado de la página -->
<div class="page-section__header">
  <h1 class="page-section__header-title">Clientes</h1>
</div>

<p-divider type="solid" />

<!-- Barra de búsqueda, filtros y botón de creación -->
<div class="page-section__header">
  <input type="text" placeholder="Buscar categoria" pInputText fluid />

  <!-- Selector de filtros -->
  <app-selector></app-selector>

  <!-- Botón para abrir modal de creación -->
  <p-button
    styleClass="h-auto w-40"
    label="Crear cliente"
    (click)="showModalCliente = true"
  ></p-button>

  <!-- Modal: Crear cliente -->
  <app-modal
    [visible]="showModalCliente"
    (visibleChange)="showModalCliente = $event"
    header="Crear cliente"
  >
    <app-crear-cliente-form
      (guardar)="crearCliente($event)"
      (cancelar)="showModalCliente = false"
    ></app-crear-cliente-form>
  </app-modal>

  <!-- Modal: Editar cliente -->
  <app-modal
    [visible]="showModalEditar"
    (visibleChange)="showModalEditar = $event"
    header="Editar Cliente"
  >
    <app-crear-cliente-form
      [clienteEditar]="clienteSeleccionado"
      (guardar)="actualizarCliente($event)"
      (cancelar)="showModalEditar = false; clienteSeleccionado = null"
    ></app-crear-cliente-form>
  </app-modal>
</div>

<!-- Tabla de clientes con operaciones CRUD -->
<div class="px-10">
  <!-- Estado de carga -->
  <div *ngIf="isLoading" class="py-4">
    <p>Cargando clientes...</p>
  </div>

  <!-- Tabla con datos y acciones -->
  <app-table
    *ngIf="!isLoading"
    [columns]="[
      { field: 'customer_name', header: 'Cliente' },
      { field: 'customer_typedocument', header: 'Tipo documento' },
      { field: 'customer_numberdocument', header: 'Num. documento' },
      { field: 'customer_phone', header: 'Teléfono' },
      { field: 'customer_email', header: 'Correo' },
      { field: 'customer_state', header: 'Estado' },
      { field: 'acciones', header: 'Acciones' }
    ]"
    [data]="clientes"
    (edit)="editarCliente($event)"
    (delete)="eliminarCliente($event)"
  >
  </app-table>
</div>
