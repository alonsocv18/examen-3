<div class="page-section__header">
  <p-button label="Volver" [routerLink]="['/admin/categorias-productos']"></p-button>
  <span class="page-section__header-title"
    >Categor√≠a: <span class="text-primary">{{ nombreCategoria }} </span></span
  >
</div>
<p-divider type="solid" />
<span class="pl-10 page-section__header-subtitle">Subcategorias:</span>
<div class="grid grid-cols-5 gap-4 py-4 px-10">
  <app-card
    *ngFor="let sub of subcategorias"
    [id]="sub.id"
    [nombre]="sub.nombre"
    [cantidad]="0"
    [disableNavigation]="true"
    (click)="irASubcategoria(sub.id, sub.nombre)"
  ></app-card>
</div>
<div class="flex flex-row px-10 gap-2">
  <input type="text" placeholder="Buscar productos de la categoria" pInputText fluid />
  <p-button
    styleClass="h-auto w-40"
    label="Crear producto"
    (click)="showModalProducto = true"
  ></p-button>
  <app-modal
    [visible]="showModalProducto"
    (visibleChange)="showModalProducto = $event"
    header="Crear Producto"
  >
    <app-crear-producto-form
      (guardar)="crearProducto($event)"
      (cancelar)="showModalProducto = false"
    ></app-crear-producto-form>
  </app-modal>

  <app-modal
    [visible]="showModalEditar"
    (visibleChange)="showModalEditar = $event"
    header="Editar Producto"
  >
    <app-crear-producto-form
      [productoEditar]="productoSeleccionado"
      (guardar)="actualizarProducto($event)"
      (cancelar)="showModalEditar = false; productoSeleccionado = null"
    ></app-crear-producto-form>
  </app-modal>
</div>

<!--- CRUD PRODUCTOS --->
<div class="px-10">
  <app-table
    [columns]="[
      { field: 'nombre', header: 'Producto' },
      { field: 'stock', header: 'Stock' },
      { field: 'precio', header: 'Precio' },
      { field: 'acciones', header: 'Acciones' }
    ]"
    [data]="productosFiltrados"
    (edit)="editarProducto($event)"
    (delete)="eliminarProducto($event)"
  >
  </app-table>
</div>
