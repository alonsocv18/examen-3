<div class="page-section">
  <div class="page-section__header">
    <p-button
      label="Volver"
      [routerLink]="['/admin/categorias-productos/categoria', idCategoria, nombreCategoria]"
    ></p-button>
    <span class="page-section__header-title">
      Subcategoría: <span class="text-primary">{{ nombreSubcategoria }}</span>
    </span>
    <button class="ml-auto pr-6 cursor-pointer" (click)="showModal = true">
      <span class="text-primary">Crear subcategoria</span>
    </button>
    <app-modal
      [visible]="showModal"
      (visibleChange)="showModal = $event"
      header="Crear Subcategoría"
    >
      <form class="p-0 m-0" (ngSubmit)="crearSubcategoria()">
        <div class="form-modal__group">
          <label class="form-modal__label">Nombre de la subcategoría</label>
          <input
            type="text"
            class="form-modal__input"
            [(ngModel)]="nuevaSubcategoria.nombre"
            name="nuevaSubcategoriaNombre"
            placeholder="Ejm: Extras"
          />
        </div>
        <div class="form-modal__footer">
          <button
            type="button"
            (click)="showModal = false"
            class="form-modal__button form-modal__button--cancel"
          >
            <svg
              class="form-modal__button-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10" />
              <line x1="15" y1="9" x2="9" y2="15" />
              <line x1="9" y1="9" x2="15" y2="15" />
            </svg>
            <span>Cancelar</span>
          </button>
          <button type="submit" class="form-modal__button form-modal__button--save">
            <svg
              class="form-modal__button-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
              <polyline points="17 21 17 13 7 13 7 21" />
              <polyline points="7 3 7 8 15 8" />
            </svg>
            <span>Crear subcategoría</span>
          </button>
        </div>
      </form>
    </app-modal>
  </div>

  <p-divider type="solid" />

  <div class="flex flex-row gap-2 px-10">
    <input type="text" placeholder="Buscar productos de la categoria" pInputText fluid />
    <p-button
      styleClass="h-auto w-40"
      label="Crear producto"
      (click)="showModalProducto = true"
    ></p-button>
    <app-modal
      [visible]="showModalProducto"
      (visibleChange)="showModalProducto = $event"
      header="Crear Producto"
    >
      <form class="p-0 m-0" (ngSubmit)="crearProducto()">
        <div class="form-modal__group">
          <label class="form-modal__label">Nombre del producto</label>
          <input
            type="text"
            class="form-modal__input"
            [(ngModel)]="nuevoProducto.nombre"
            name="nuevoProductoNombre"
            placeholder="Ejm: Porción de papas"
          />
        </div>
        <div class="form-modal__group">
          <label class="form-modal__label">Stock</label>
          <input
            type="number"
            class="form-modal__input"
            [(ngModel)]="nuevoProducto.stock"
            name="nuevoProductoStock"
            placeholder="Ejm: 10"
          />
        </div>
        <div class="form-modal__group">
          <label class="form-modal__label">Precio</label>
          <input
            type="number"
            class="form-modal__input"
            [(ngModel)]="nuevoProducto.precio"
            name="nuevoProductoPrecio"
            placeholder="Ejm: 5"
          />
        </div>
        <div class="form-modal__footer">
          <button
            type="button"
            (click)="showModalProducto = false"
            class="form-modal__button form-modal__button--cancel"
          >
            <svg
              class="form-modal__button-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10" />
              <line x1="15" y1="9" x2="9" y2="15" />
              <line x1="9" y1="9" x2="15" y2="15" />
            </svg>
            <span>Cancelar</span>
          </button>
          <button type="submit" class="form-modal__button form-modal__button--save">
            <svg
              class="form-modal__button-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
              <polyline points="17 21 17 13 7 13 7 21" />
              <polyline points="7 3 7 8 15 8" />
            </svg>
            <span>Crear producto</span>
          </button>
        </div>
      </form>
    </app-modal>
  </div>

  <div class="px-10">
    <!--- CRUD PRODUCTOS --->
    <app-table
      [columns]="[
        { field: 'nombre', header: 'Producto' },
        { field: 'stock', header: 'Stock' },
        { field: 'precio', header: 'Precio' },
        { field: 'acciones', header: 'Acciones' }
      ]"
      [data]="productos"
    >
    </app-table>
  </div>
</div>
