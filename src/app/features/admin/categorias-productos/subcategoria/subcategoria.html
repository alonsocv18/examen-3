<div class="page-section">
  <div class="page-section__header">
    <p-button
      label="Volver"
      [routerLink]="['/admin/categorias-productos/categoria', idCategoria, nombreCategoria]"
    ></p-button>
    <span class="page-section__header-title">
      Subcategoría: <span class="text-primary">{{ nombreSubcategoria }}</span>
    </span>
    <button class="ml-auto pr-6 cursor-pointer" (click)="showModal = true">
      <span class="text-primary">Crear subcategoria</span>
    </button>
    <app-modal
      [visible]="showModal"
      (visibleChange)="showModal = $event"
      header="Crear Subcategoría"
    >
      <app-crear-subcategoria-form
        (guardar)="crearSubcategoria($event)"
        (cancelar)="showModal = false"
      ></app-crear-subcategoria-form>
    </app-modal>
  </div>

  <p-divider type="solid" />

  <div class="flex flex-row gap-2 px-10">
    <input type="text" placeholder="Buscar productos de la categoria" pInputText fluid />
    <p-button
      styleClass="h-auto w-40"
      label="Crear producto"
      (click)="showModalProducto = true"
    ></p-button>
    <app-modal
      [visible]="showModalProducto"
      (visibleChange)="showModalProducto = $event"
      header="Crear Producto"
    >
      <app-crear-producto-form
        (guardar)="crearProducto($event)"
        (cancelar)="showModalProducto = false"
      ></app-crear-producto-form>
    </app-modal>

    <app-modal
      [visible]="showModalEditar"
      (visibleChange)="showModalEditar = $event"
      header="Editar Producto"
    >
      <app-crear-producto-form
        [productoEditar]="productoSeleccionado"
        (guardar)="actualizarProducto($event)"
        (cancelar)="showModalEditar = false; productoSeleccionado = null"
      ></app-crear-producto-form>
    </app-modal>
  </div>

  <div class="px-10">
    <!--- CRUD PRODUCTOS --->
    <app-table
      [columns]="[
        { field: 'nombre', header: 'Producto' },
        { field: 'stock', header: 'Stock' },
        { field: 'precio', header: 'Precio' },
        { field: 'acciones', header: 'Acciones' }
      ]"
      [data]="productos"
      (edit)="editarProducto($event)"
      (delete)="eliminarProducto($event)"
    >
    </app-table>
  </div>
</div>
